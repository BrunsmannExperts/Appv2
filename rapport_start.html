<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Rapport starten</title>
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/config.js"></script>
  <script src="/js/app.js"></script>
</head>
<body>
  <h1>Nieuw Rapport</h1>
  <div id="rapportContainer"></div>

  <script>
    function laadRapportStructuur() {
      const data = JSON.parse(localStorage.getItem("rapportstructuur"));
      if (!data || data.length === 0) {
        document.getElementById("rapportContainer").innerHTML = "<p>‚ùå Geen rapportstructuur gevonden. Upload een Excelbestand in instellingen.</p>";
        return;
      }

      const container = document.getElementById("rapportContainer");
      let huidigHoofdstuk = "";
      data.forEach((item, index) => {
        if (item.Hoofdstuk && item.Hoofdstuk !== huidigHoofdstuk) {
          huidigHoofdstuk = item.Hoofdstuk;
          const h2 = document.createElement("h2");
          h2.textContent = huidigHoofdstuk;
          container.appendChild(h2);
        }

        const veldLabel = document.createElement("label");
        veldLabel.textContent = item.Veldnaam + (item.Verplicht === "ja" ? " *" : "");
        veldLabel.htmlFor = `veld-${index}`;
        container.appendChild(veldLabel);

        const textarea = document.createElement("textarea");
        textarea.id = `veld-${index}`;
        textarea.rows = 3;
        textarea.style.width = "100%";
        textarea.placeholder = item.Toelichting || "";
        container.appendChild(textarea);
      });
    }

    document.addEventListener("DOMContentLoaded", laadRapportStructuur);
  </script>
</body>
</html>
